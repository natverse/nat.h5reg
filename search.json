[{"path":"https://natverse.org/nat.h5reg/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2019 Gregory Jefferis Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://natverse.org/nat.h5reg/SUPPORT.html","id":null,"dir":"","previous_headings":"","what":"Getting help with nat.h5reg","title":"Getting help with nat.h5reg","text":"Thanks using nat.h5reg. ’re sorry ’re trouble, ’re help! get help quickly possible, please read following.","code":""},{"path":"https://natverse.org/nat.h5reg/SUPPORT.html","id":"search","dir":"","previous_headings":"","what":"Search","title":"Getting help with nat.h5reg","text":"first thing see anyone problem : Search nat-user google group. Search GitHub issues nat.h5reg package. Search GitHub issues across whole natverse case problem related package. can add terms search search box top left page. solves problem, great!","code":""},{"path":"https://natverse.org/nat.h5reg/SUPPORT.html","id":"known-problems","dir":"","previous_headings":"","what":"Known Problems","title":"Getting help with nat.h5reg","text":"need help known problem: found relevant thread nat-user google group: please reply . found GitHub issue: please reply details (’ll need GitHub login) just like let us know ’re trouble . ’re sure: ask new question nat-user google group linking found.","code":""},{"path":"https://natverse.org/nat.h5reg/SUPPORT.html","id":"new-problems","dir":"","previous_headings":"","what":"New Problems","title":"Getting help with nat.h5reg","text":"looks like new problem : just question: please ask nat-user google group. need report new bug: please file issue. ’re sure: please just ask nat-user google group! problem bug feature request, can easily return report - may able point existing report workaround.","code":""},{"path":"https://natverse.org/nat.h5reg/SUPPORT.html","id":"good-questions-and-bug-reports","dir":"","previous_headings":"","what":"Good Questions and Bug Reports","title":"Getting help with nat.h5reg","text":"specific Include code triggered problem possible, make minimal reproducible example (reprex) much easier us help can run reprex machine without data. might want use sample data nat package help, refer publicly available data online. can use reprex package help read Get help! section tidyverse site information . Thanks help!","code":""},{"path":"https://natverse.org/nat.h5reg/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Gregory Jefferis. Author, maintainer. Saalfeld Lab. Copyright holder, author.            transform-helpers java library","code":""},{"path":"https://natverse.org/nat.h5reg/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Jefferis G, Saalfeld Lab (2023). nat.h5reg: Neuroanatomy Toolbox Support Saalfeld/Bogovic HDF5 Registration Format. R package version 0.4.3, https://natverse.org/nat.h5reg/, https://github.com/natverse/nat.h5reg.","code":"@Manual{,   title = {nat.h5reg: Neuroanatomy Toolbox Support for Saalfeld/Bogovic HDF5 Registration Format},   author = {Gregory Jefferis and {Saalfeld Lab}},   year = {2023},   note = {R package version 0.4.3, https://natverse.org/nat.h5reg/},   url = {https://github.com/natverse/nat.h5reg}, }"},{"path":"https://natverse.org/nat.h5reg/index.html","id":"nath5reg","dir":"","previous_headings":"","what":"Neuroanatomy Toolbox Support for Saalfeld/Bogovic HDF5 Registration Format","title":"Neuroanatomy Toolbox Support for Saalfeld/Bogovic HDF5 Registration Format","text":"nat.h5reg enables Neuroanatomy Toolbox (nat) suite carry 3D coordinate transforms arbitrary objects based deformation fields encoded HDF5 registration format Stephan Saalfeld John Bogovic.","code":""},{"path":"https://natverse.org/nat.h5reg/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Neuroanatomy Toolbox Support for Saalfeld/Bogovic HDF5 Registration Format","text":"can install development version nat.h5reg GitHub : See information Java installation.","code":"devtools::install_github('natverse/nat.h5reg')"},{"path":"https://natverse.org/nat.h5reg/index.html","id":"example","dir":"","previous_headings":"","what":"Example","title":"Neuroanatomy Toolbox Support for Saalfeld/Bogovic HDF5 Registration Format","text":"round trip test using bridging registration two template brains.","code":"library(nat.h5reg)  # We will use sample Kenyon Cells in FCWB (FlyCircuit) space library(nat) head(kcs20)  # swap=FALSE, so this will map points onto JRC2018F  kcs20.jrc2018 = xform(kcs20,    reg = h5reg('JRC2018F_FCWB_transform_quant16.h5', swap=FALSE) )  # map back again (round trip test) kcs20.rt = xform(   kcs20.jrc2018,   reg = h5reg('JRC2018F_FCWB_transform_quant16.h5') )  plot3d(kcs20.jrc2018, col='green')  clear3d() plot3d(kcs20, col='red') plot3d(kcs20.rt, col='blue')  diffs=xyzmatrix(kcs20)-xyzmatrix(kcs20.rt) str(diffs) plot(as.data.frame(diffs))"},{"path":"https://natverse.org/nat.h5reg/index.html","id":"java","dir":"","previous_headings":"","what":"Java","title":"Neuroanatomy Toolbox Support for Saalfeld/Bogovic HDF5 Registration Format","text":"need Java installed system use h5 format registrations. usually mean installing Java Development Kit (JDK). now come confusing number flavours, personal use, easiest probably install latest stable Oracle JDK. time writing functionality tested versus Oracle JDK 11.0.2. can find java installation : may run errors installing rJava package. typically happens mismatch version JDK R expecting. happens try (Terminal) Now R, try installing rJava ","code":"nat.h5reg::dr_java() # make sure java is in your path java --version # tell R about your current version java R CMD javareconf install.packages(\"rJava\")"},{"path":"https://natverse.org/nat.h5reg/index.html","id":"acknowledgements","dir":"","previous_headings":"","what":"Acknowledgements","title":"Neuroanatomy Toolbox Support for Saalfeld/Bogovic HDF5 Registration Format","text":"Based critically https://github.com/saalfeldlab/transform-helpers/ kindly first written trip Cambridge Stephan Saalfeld.","code":""},{"path":"https://natverse.org/nat.h5reg/reference/dr_h5reg.html","id":null,"dir":"Reference","previous_headings":"","what":"Check the local h5reg and java configuration (required for h5reg transforms) — dr_java","title":"Check the local h5reg and java configuration (required for h5reg transforms) — dr_java","text":"Check local h5reg java configuration (required h5reg transforms)","code":""},{"path":"https://natverse.org/nat.h5reg/reference/dr_h5reg.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check the local h5reg and java configuration (required for h5reg transforms) — dr_java","text":"","code":"dr_java()  dr_h5reg()"},{"path":"https://natverse.org/nat.h5reg/reference/dr_h5reg.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Check the local h5reg and java configuration (required for h5reg transforms) — dr_java","text":"","code":"# \\donttest{ dr_h5reg() #> rJava #> ---- #> The rJava package is linked to the following JVM #> java.version: 11.0.21  #> java.home: /usr/lib/jvm/temurin-11-jdk-amd64  #> java.class.version: 55.0  #>  #> System java #> ---- #> (used as a fallback when rJava not available) #> java run time found at: /usr/bin/java  #> java.version: 11.0.21  #>  #> h5reg test #> ---- #> Using transform helper: transform-helpers-0.0.3-SNAPSHOT-shaded.jar  #> h5reg xform infrastructure OK! #> xform test gave correct results # }"},{"path":"https://natverse.org/nat.h5reg/reference/h5reg-utils.html","id":null,"dir":"Reference","previous_headings":"","what":"Read information about h5reg transformations from file — h5reg-utils","title":"Read information about h5reg transformations from file — h5reg-utils","text":".h5reg checks file (bytes memory) looks like   h5reg file.","code":""},{"path":"https://natverse.org/nat.h5reg/reference/h5reg-utils.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Read information about h5reg transformations from file — h5reg-utils","text":"","code":"read.h5reg.info(x, ...)  is.h5reg(f = NULL, bytes = NULL)"},{"path":"https://natverse.org/nat.h5reg/reference/h5reg-utils.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Read information about h5reg transformations from file — h5reg-utils","text":"x path .h5 file ... Currently ignored f Path file disk bytes set bytes least big HDF5 magic value.","code":""},{"path":"https://natverse.org/nat.h5reg/reference/h5reg-utils.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Read information about h5reg transformations from file — h5reg-utils","text":"named list describing contents h5reg file. Logical indicating whether file HDF5 encoded registration   file ('codeh5reg)","code":""},{"path":"https://natverse.org/nat.h5reg/reference/h5reg-utils.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Read information about h5reg transformations from file — h5reg-utils","text":"bytes passed raw byte array, .h5reg can   quick check ensure actually HDF5 file,   inspect contents file detail.","code":""},{"path":[]},{"path":"https://natverse.org/nat.h5reg/reference/h5reg-utils.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Read information about h5reg transformations from file — h5reg-utils","text":"","code":"# \\donttest{ h5f <- system.file('samples/complexdummyh5reg.h5', package = 'nat.h5reg') read.h5reg.info(h5f) #> $`0` #> $`0`$dfield #> $`0`$dfield$ndim #> [1] 1 #>  #> $`0`$dfield$dims #> [1] 10 #>  #> $`0`$dfield$nbytes #> [1] 49 #>  #>  #> $`0`$invdfield #> $`0`$invdfield$ndim #> [1] 1 #>  #> $`0`$invdfield$dims #> [1] 10 #>  #> $`0`$invdfield$nbytes #> [1] 49 #>  #>  #>  #> $`1` #> $`1`$dfield #> $`1`$dfield$ndim #> [1] 1 #>  #> $`1`$dfield$dims #> [1] 10 #>  #> $`1`$dfield$nbytes #> [1] 49 #>  #>  #> $`1`$invdfield #> $`1`$invdfield$ndim #> [1] 1 #>  #> $`1`$invdfield$dims #> [1] 10 #>  #> $`1`$invdfield$nbytes #> [1] 49 #>  #>  #>  is.h5reg(h5f) #> [1] TRUE # }"},{"path":"https://natverse.org/nat.h5reg/reference/h5reg.html","id":null,"dir":"Reference","previous_headings":"","what":"Wrapper object for one or more HDF5 encoded transforms — h5reg","title":"Wrapper object for one or more HDF5 encoded transforms — h5reg","text":"Wrapping paths one h5 registration files disk   antsreg object means can used   nat::xform inside nat::reglist objects.","code":""},{"path":"https://natverse.org/nat.h5reg/reference/h5reg.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Wrapper object for one or more HDF5 encoded transforms — h5reg","text":"","code":"h5reg(..., swap = NULL)"},{"path":"https://natverse.org/nat.h5reg/reference/h5reg.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Wrapper object for one or more HDF5 encoded transforms — h5reg","text":"... Path one HDF5 encoded registrations. swap TRUE implies registration specifies direction required transforming points. FALSE implies inverse. default implied swap=NULL swap=TRUE registrations.","code":""},{"path":"https://natverse.org/nat.h5reg/reference/h5reg.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Wrapper object for one or more HDF5 encoded transforms — h5reg","text":"character vector additional class h5reg.","code":""},{"path":"https://natverse.org/nat.h5reg/reference/h5reg.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Wrapper object for one or more HDF5 encoded transforms — h5reg","text":"h5 registrations contains forward inverse deformation   fields along corresponding affine transforms wrapped single   HDF5 file. therefore naively invertible just picking   correct registration field. historical reasons (based convention CMTK),   swap=FALSE, assume trying specify registration   direction required image transformation. opposite   direction required point transformation, convention h5   registration files. therefore set swap=TRUE   specified. multiple registrations specified, given order   floating template brain, reading left right. See   nat::xform nat::reglist   details.","code":""},{"path":[]},{"path":"https://natverse.org/nat.h5reg/reference/h5reg.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Wrapper object for one or more HDF5 encoded transforms — h5reg","text":"","code":"if (FALSE) { # We will use sample Kenyon Cells in FCWB (FlyCircuit) space library(nat) head(kcs20)  # swap=FALSE, so this will map points onto JRC2018F kcs20.jrc2018 = xform(kcs20,                       reg = h5reg('JRC2018F_FCWB_transform_quant16.h5', swap=FALSE) )  # map back again (round trip test) kcs20.rt = xform(   kcs20.jrc2018,   reg = h5reg('JRC2018F_FCWB_transform_quant16.h5') )  plot3d(kcs20.jrc2018, col='green')  clear3d() plot3d(kcs20, col='red') plot3d(kcs20.rt, col='blue')  diffs=xyzmatrix(kcs20)-xyzmatrix(kcs20.rt) str(diffs) plot(as.data.frame(diffs)) }"},{"path":"https://natverse.org/nat.h5reg/reference/nat.h5reg-package.html","id":null,"dir":"Reference","previous_headings":"","what":"nat.h5reg: Neuroanatomy Toolbox Support for Saalfeld/Bogovic HDF5 Registration Format — nat.h5reg-package","title":"nat.h5reg: Neuroanatomy Toolbox Support for Saalfeld/Bogovic HDF5 Registration Format — nat.h5reg-package","text":"Enables Neuroanatomy Toolbox (nat) suite carry 3D coordinate transformation defined points encoded HDF5 registration format defined Stephan Saalfeld John Bogovic.","code":""},{"path":"https://natverse.org/nat.h5reg/reference/nat.h5reg-package.html","id":"h-registration-format","dir":"Reference","previous_headings":"","what":"h5 registration format","title":"nat.h5reg: Neuroanatomy Toolbox Support for Saalfeld/Bogovic HDF5 Registration Format — nat.h5reg-package","text":"  h5   registration format defined John Bogovic Stephan Saalfeld   efficient way distribute deformation fields (accompanying   affine transformations). provides standard way distribute   apply transforms HDF5 wrapper. Although deformation fields general form specifying   non-rigid registration, can much larger parametric   deformation. h5 tools provide substantial (lossy) compression   fields expense small (usually irrelevant) loss   precision. also provide option one downsampled   versions original field, typically relatively little   impact precision. package supports use `.h5` registration files   h5reg class associated functions.","code":""},{"path":[]},{"path":"https://natverse.org/nat.h5reg/reference/nat.h5reg-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"nat.h5reg: Neuroanatomy Toolbox Support for Saalfeld/Bogovic HDF5 Registration Format — nat.h5reg-package","text":"Maintainer: Gregory Jefferis jefferis@gmail.com (ORCID) Authors: Saalfeld Lab (transform-helpers java library) [copyright holder]","code":""},{"path":"https://natverse.org/nat.h5reg/reference/xformpoints.h5reg.html","id":null,"dir":"Reference","previous_headings":"","what":"Map points using h5 registrations — xformpoints.h5reg","title":"Map points using h5 registrations — xformpoints.h5reg","text":"Map points using h5 registrations","code":""},{"path":"https://natverse.org/nat.h5reg/reference/xformpoints.h5reg.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Map points using h5 registrations — xformpoints.h5reg","text":"","code":"# S3 method for h5reg xformpoints(reg, points, ..., method = c(\"auto\", \"java\", \"rjava\"))"},{"path":"https://natverse.org/nat.h5reg/reference/xformpoints.h5reg.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Map points using h5 registrations — xformpoints.h5reg","text":"reg h5reg object specifying one h5 registrations. points Nx3 matrix 3D points transform ... Additional arguments passed java transform tool (currently ignored). method Whether shell java executable (method='java') use rJava package (method='rjava'). default (method='auto') uses rJava installed. See Java section implications choice.","code":""},{"path":"https://natverse.org/nat.h5reg/reference/xformpoints.h5reg.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Map points using h5 registrations — xformpoints.h5reg","text":"Nx3 matrix transformed points","code":""},{"path":"https://natverse.org/nat.h5reg/reference/xformpoints.h5reg.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Map points using h5 registrations — xformpoints.h5reg","text":"See h5reg details ordering   registrations.","code":""},{"path":"https://natverse.org/nat.h5reg/reference/xformpoints.h5reg.html","id":"java","dir":"Reference","previous_headings":"","what":"Java","title":"Map points using h5 registrations — xformpoints.h5reg","text":"default xformpoints.h5reg starts separate Java   Virtual Machine (JVM) every call. overhead might   0.5s range, quickly builds . Alternatively, can use   method='rjava', depends 'rJava' package; since rJava   can little fiddly install, suggested dependency.   Using rJava transparently starts single JVM session R   reuses , substantially speeding situation many   small objects transform. also somewhat efficient terms   disk/CPU since points retained memory rather written   text files. However hands limited impact elapsed   time.","code":""},{"path":[]},{"path":"https://natverse.org/nat.h5reg/reference/xformpoints.h5reg.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Map points using h5 registrations — xformpoints.h5reg","text":"","code":"# \\donttest{ # basic usage library(nat) #> Loading required package: rgl #> Some nat functions depend on a CMTK installation. See ?cmtk and README.md for details. #>  #> Attaching package: ‘nat’ #> The following objects are masked from ‘package:base’: #>  #>     intersect, setdiff, union sampleh5path=system.file(\"samples/JRC2018F_FAFB_extrasmall.h5\",   package = 'nat.h5reg') sampleh5reg=h5reg(sampleh5path) xform(cbind(50,50,30), sampleh5reg) #>          [,1]     [,2]     [,3] #> [1,] 221.2568 147.9268 19.90423 xform(cbind(50,50,30), sampleh5reg, swap=TRUE) #>          [,1]     [,2]     [,3] #> [1,] 221.2568 147.9268 19.90423 # }  if (FALSE) { # specify a particular level for registration containing more than 1 level # of detail # NB not implemented in this sample xform(cbind(50,50,30), sampleh5reg, level=0) # choose faster, lower resolution registration xform(cbind(50,50,30), sampleh5reg, level=2) # print more detailed error messages when trying to debug xform(cbind(50,50,30), sampleh5reg, level=0, stderr=\"\") }"},{"path":"https://natverse.org/nat.h5reg/news/index.html","id":"nath5reg-043","dir":"Changelog","previous_headings":"","what":"nat.h5reg 0.4.3","title":"nat.h5reg 0.4.3","text":"fix h5 registrations MacOS ARM machines (#10)","code":""},{"path":"https://natverse.org/nat.h5reg/news/index.html","id":"nath5reg-042","dir":"Changelog","previous_headings":"","what":"nat.h5reg 0.4.2","title":"nat.h5reg 0.4.2","text":"try provide information java errors saalfeld_xform()","code":""},{"path":"https://natverse.org/nat.h5reg/news/index.html","id":"nath5reg-041","dir":"Changelog","previous_headings":"","what":"nat.h5reg 0.4.1","title":"nat.h5reg 0.4.1","text":"dr_h5reg() check java h5reg installation substantial speed-transforming neuronlist objects xformpoints.h5reg() memoising default level check h5reg objects (17148d5219ff1b1b99ab1dfb4f793eede175cf39).","code":""},{"path":"https://natverse.org/nat.h5reg/news/index.html","id":"nath5reg-040","dir":"Changelog","previous_headings":"","what":"nat.h5reg 0.4.0","title":"nat.h5reg 0.4.0","text":"Faster transforms using rJava available (#6) Don’t warn using default registration level (#8) fix saalfeld_xform fails NA points inputs (#7)","code":""},{"path":"https://natverse.org/nat.h5reg/news/index.html","id":"nath5reg-032","dir":"Changelog","previous_headings":"","what":"nat.h5reg 0.3.2","title":"nat.h5reg 0.3.2","text":"add package overview documentation switch natverse github organisation","code":""},{"path":"https://natverse.org/nat.h5reg/news/index.html","id":"nath5reg-031","dir":"Changelog","previous_headings":"","what":"nat.h5reg 0.3.1","title":"nat.h5reg 0.3.1","text":"Make hdf5r package essential dependency (.e. Import) need look inside h5 files run transforms (#5) quote paths java command line tool (case e.g. path transform file space ) (#4) update v0.0.1 release java command line tool. changes behaviour range points affine + nearest non-rigid displacement (see https://github.com/saalfeldlab/transform-helpers/issues/3) depend R >= 3.5.0 rds test files","code":""},{"path":"https://natverse.org/nat.h5reg/news/index.html","id":"nath5reg-030","dir":"Changelog","previous_headings":"","what":"nat.h5reg 0.3.0","title":"nat.h5reg 0.3.0","text":"fix bug inverse transforms upgrading transform helper jar file export .h5reg() read.h5reg.info() add tests simple test h5 files","code":""},{"path":"https://natverse.org/nat.h5reg/news/index.html","id":"nath5reg-020","dir":"Changelog","previous_headings":"","what":"nat.h5reg 0.2.0","title":"nat.h5reg 0.2.0","text":"First public version Fully functional transforms using sample h5 format transforms Stephan Saalfeld.","code":""}]
